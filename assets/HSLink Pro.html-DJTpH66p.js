import{_ as t}from"./plugin-vue_export-helper-DlAUqK2U.js";import{e as a,f as r,o as s}from"./app-DVsPdcuO.js";const l="/assets/2024-09-23-22-25-12-5VzxSykc.png",i="/assets/2024-09-23-23-02-55-P2Ab3AAM.png",d="/assets/hslink_uart_messy-DS-pmKrG.png",o="/assets/hslink_uart_fly_pullup_v1.2.0_1-B1yexary.png",c="/assets/hslink_uart_fly_pullup_v1.2.0_2-Dd-sJP8S.jpg",n={};function h(p,e){return s(),a("div",null,e[0]||(e[0]=[r('<p>HSLink Pro 是一款使用 HPM5301 芯片的一个 CherryDAP 实现。其中主要代码参考了 <a href="./HPM5301EVKLite">hpm5301evklite</a> 工程。</p><p><img src="'+l+'" alt=""></p><h2 id="支持特性" tabindex="-1"><a class="header-anchor" href="#支持特性"><span>支持特性</span></a></h2><p>目前 HSLink Pro 支持的特性有：</p><ul class="task-list-container"><li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" id="task-item-0" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-0"> 提供最高80MHz的 SWD 和 JTAG 速率</label></li><li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" id="task-item-1" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-1"> 电平转换功能，适配任意电平的目标板</label></li><li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" id="task-item-2" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-2"> 同时支持 SWD 和 JTAG 协议</label></li><li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" id="task-item-3" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-3"> 支持为目标板提供最高 1A 负载的供电能力</label></li><li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" id="task-item-4" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-4"> 支持虚拟串口功能</label></li><li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" id="task-item-5" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-5"> 支持串口的 DTR/RTS 控制，可为 ESP32 等MCU提供自动下载</label></li><li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" id="task-item-6" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-6"> 支持SWD模式下对 Arm 芯片进行写<code>SYSRESETREQ</code> 和 <code>VECTRESET</code> 软复位</label></li><li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" id="task-item-7" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-7"> 支持通过上位机进行持久化配置</label></li><li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" id="task-item-8" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-8"> 支持通过上位机进行固件升级</label></li><li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" id="task-item-9" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-9"> 可通过上位机设置是否开启速度Boost</label></li><li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" id="task-item-10" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-10"> 可通过上位机设置是否开启电平转换</label></li><li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" id="task-item-11" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-11"> 可通过上位机设置是否固定输出电源</label></li><li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" id="task-item-12" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-12"> 可通过上位机设置是否开启软复位</label></li><li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" id="task-item-13" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-13"> 支持更多复位方式，例如POR</label></li></ul><p>上位机下载地址：</p><p><a href="https://github.com/HSLink/HSLinkUpper/releases" target="_blank" rel="noopener noreferrer">https://github.com/HSLink/HSLinkUpper/releases</a></p><h2 id="引脚定义" tabindex="-1"><a class="header-anchor" href="#引脚定义"><span>引脚定义</span></a></h2><p>HSLink Pro 的引脚定义满足 <a href="https://wiki.segger.com/20-pin_J-Link_Connector" target="_blank" rel="noopener noreferrer">20-pin J-Link Connector</a>定义。目前的引脚定义分配如下：</p><p><img src="'+i+'" alt=""></p><table><thead><tr><th>引脚</th><th>名称</th><th>描述</th></tr></thead><tbody><tr><td>1</td><td>Vref</td><td>参考电压输入</td></tr><tr><td>2</td><td>Tvcc</td><td>目标板供电可调电源输出</td></tr><tr><td>3</td><td>TRST</td><td>JTAG 复位信号，通常连接到目标 CPU 的 nTRST。该引脚通常在目标上被拉高，以避免在没有连接时意外复位</td></tr><tr><td>4</td><td>GND</td><td>地</td></tr><tr><td>5</td><td>TDI</td><td>JTAG TDI</td></tr><tr><td>6</td><td>GND</td><td>地</td></tr><tr><td>7</td><td>TMS/SWDIO</td><td>在JTAG模式为TMS，在SWD模式下则为SWDIO</td></tr><tr><td>8</td><td>GND</td><td>地</td></tr><tr><td>9</td><td>TCK/SWCLK</td><td>在JTAG模式为TCK，在SWD模式下则为SWCLK</td></tr><tr><td>10</td><td>GND</td><td>地</td></tr><tr><td>11</td><td>NC</td><td>未连接</td></tr><tr><td>12</td><td>GND</td><td>地</td></tr><tr><td>13</td><td>TDO</td><td>JTAG TDO</td></tr><tr><td>14</td><td>UART_DTR</td><td>CDC的DTR信号输出，可用于ESP32等MCU串口自动下载</td></tr><tr><td>15</td><td>SRST</td><td>目标板复位信号，低电平有效</td></tr><tr><td>16</td><td>UART_RTS</td><td>CDC的RTS信号输出，可用于ESP32等MCU串口自动下载</td></tr><tr><td>17</td><td>NC</td><td>未连接</td></tr><tr><td>18</td><td>UART_TX</td><td>串口TX信号</td></tr><tr><td>19</td><td>+5V</td><td>+5V 电源输出</td></tr><tr><td>20</td><td>UART_RX</td><td>串口RX信号</td></tr></tbody></table><h2 id="上位机配置项" tabindex="-1"><a class="header-anchor" href="#上位机配置项"><span>上位机配置项</span></a></h2><ul><li><p>速度Boost</p><ul><li>启用后实际的速度是Keil中配置的速度（以及其他通过<code>DAP_SWJ_Clock</code>接口调用设置的速度）的10倍，上限80M</li></ul></li><li><p>SWD/JTAG输出方式</p><ul><li>SPI模式为使用SPI外设模拟时序</li><li>GPIO模式为GPIO模拟时序</li><li>JTAG_SHIFT 加速 <ul><li>该设置项只有当JTAG输出方式设置为SPI时才会生效</li><li>选择启用代表将使用SPI外设模拟JTAG的单bit数据（可能会导致一些兼容性问题）</li><li>选择禁用代表将使用GPIO模拟JTAG的单bit数据（兼容性较好）</li></ul></li></ul></li><li><p>参考电压</p><ul><li>在Vref没有电压输入或电压小于等于1.6V时，调试器内部Tvcc的电压</li></ul></li><li><p>上电开启电源输出</p><ul><li>在Vref没有电压输入或电压小于等于1.6V时，调试器是否输出Tvcc。</li><li>在Vref没有电压输入或电压小于等于1.6V时，调试器是否输出+5V（可能随着版本迭代而改变是否受控）</li></ul></li><li><p>上电开启IO输出</p><ul><li>在Vref没有电压输入或电压小于等于1.6V时，调试器是否输出信号。</li></ul></li><li><p>默认复位方式</p><ul><li>调用<code>PIN_nRESET_OUT</code>时的复位行为</li></ul></li><li><p>启用LED，LED亮度</p><ul><li>是否启用板载的LED，以及其亮度</li></ul></li></ul><h2 id="hslink-pro-升级流程" tabindex="-1"><a class="header-anchor" href="#hslink-pro-升级流程"><span>HSLink Pro 升级流程</span></a></h2><h3 id="一般升级流程" tabindex="-1"><a class="header-anchor" href="#一般升级流程"><span>一般升级流程</span></a></h3><p>正常连接电脑，启动完成后长按<code>BL</code>按钮2秒以上即可进入升级模式，此时电脑上会出现一个<code>CHERRYUF2</code>的移动存储设备，将升级的<code>.uf2</code>文件拖入其中即可。最新的固件可以在QQ交流群群文件或者<a href="https://github.com/cherry-embedded/CherryDAP/releases" target="_blank" rel="noopener noreferrer">GitHub releases</a>中下载。</p><p>需要注意的是，如果是在2.3.4及之前版本升级到更新版本，需要先升级<code>中间包</code>，再升级其他版本的固件。</p><h3 id="v2-3-4及之前版本升级流程" tabindex="-1"><a class="header-anchor" href="#v2-3-4及之前版本升级流程"><span>V2.3.4及之前版本升级流程</span></a></h3><p>对于跨越2.4.0的更新，升级到更新版本需要更新Bootloader，必须先更新<code>中间包</code>将bootloader升级之后，才能更新到其他更新版本的固件。中间包下载地址: <a href="https://github.com/cherry-embedded/CherryDAP/releases/download/HSLinkPro-2.4.0/HSLink-Pro-Middle.uf2" target="_blank" rel="noopener noreferrer">https://github.com/cherry-embedded/CherryDAP/releases/download/HSLinkPro-2.4.0/HSLink-Pro-Middle.uf2</a>，其构建的源码为：<a href="https://github.com/HSLink/CherryDAP_HSLink/tree/upgrade-bl-use-app" target="_blank" rel="noopener noreferrer">https://github.com/HSLink/CherryDAP_HSLink/tree/upgrade-bl-use-app</a>。</p><p>请注意，在这个过程中请<strong>不要断电</strong>！！！</p><p>如果一切顺利，HSLink会在LED多次绿色和蓝色闪烁后自动重新出现<code>CHERRYUF2</code>移动存储设备，之后再拖入所需要的版本即可更新。</p><h3 id="回退" tabindex="-1"><a class="header-anchor" href="#回退"><span>回退</span></a></h3><p>一般来说，新Bootloader版本均能启动各版本APP，但新Bootloader可能会导致旧App持久化存储出现问题。旧Bootloader能启动旧版本APP。回滚只需要进入Bootloader将所需固件拖入<code>CHERRYUF2</code>即可。</p><p>需要注意的是，<strong>我们并未对回滚进行仔细测试</strong>。如果遇到恶性问题，请在QQ群中或是<a href="https://github.com/cherry-embedded/CherryDAP/issues" target="_blank" rel="noopener noreferrer">Issues · cherry-embedded/CherryDAP</a>处提出，我们将在<strong>master</strong>分支尽快修复。</p><h3 id="使用上位机升级-需要软件版本大于等于2-4-0" tabindex="-1"><a class="header-anchor" href="#使用上位机升级-需要软件版本大于等于2-4-0"><span>使用上位机升级（需要软件版本大于等于2.4.0）</span></a></h3><p>首先，在设备设置页面连接设备，然后切换到设备升级。对于升级Bootloader，选择固件后升级Bootloader即可。对于升级App，点击进入Bootloader后选择固件后点击升级APP即可。</p><h2 id="faq" tabindex="-1"><a class="header-anchor" href="#faq"><span>FAQ</span></a></h2><h3 id="为什么-hslink-pro-没有电源-信号输出" tabindex="-1"><a class="header-anchor" href="#为什么-hslink-pro-没有电源-信号输出"><span>为什么 HSLink Pro 没有电源/信号输出？</span></a></h3><p>如果Vref低于1.6V或悬空，默认并不会输出电源和信号。接入Vref后Tvcc自动生成一个相同的电压输出，信号电平也将调整为相同的电压。也可以通过上位机配置<strong>上电开启电源输出</strong>与<strong>上电开启IO输出</strong>，在Vref低于1.6V时使用配置的电压。</p><h3 id="读取不到mcu-需要抬高电压才能读到mcu-需要降低速度到很低的水平才能读到mcu" tabindex="-1"><a class="header-anchor" href="#读取不到mcu-需要抬高电压才能读到mcu-需要降低速度到很低的水平才能读到mcu"><span>读取不到MCU/需要抬高电压才能读到MCU/需要降低速度到很低的水平才能读到MCU</span></a></h3><p>可以尝试将SWD信号线以麻花辫的方式绞成一股。并排杜邦线的形式容易造成奇奇怪怪的干扰。</p><h3 id="jtag对端短接了tvcc与vref导致振荡等问题" tabindex="-1"><a class="header-anchor" href="#jtag对端短接了tvcc与vref导致振荡等问题"><span>JTAG对端短接了TVcc与Vref导致振荡等问题</span></a></h3><ul><li>首先，Vref为输入到调试器的参考电平，TVcc为输出的一路跟随Vref的电压，<strong>不应该直接连接</strong>，能修改PCB的话应该修改，或者物理切断线。</li><li>在对端仅短接，不供电的情况下，电压会产生振荡。请在上位机关闭<strong>上电开启电源输出</strong>。</li><li>在对端短接并供电时，请确保预设值与Vref值相同以减小双电源供电产生的影响。对于大部分LDO和DCDC，不超出耐受范围，这仍是安全的。对于某些设计了输出大于设定时吸收电流（常见于超高PSRR，90db）的LDO与极少数主动吸收电流的同步整流buck，可能导致一些问题。</li></ul><h3 id="在下载时串口会有乱码" tabindex="-1"><a class="header-anchor" href="#在下载时串口会有乱码"><span>在下载时串口会有乱码？</span></a></h3><p><img src="'+d+'" alt="hslink_uart_messy"></p><p>很抱歉，这是<strong>HSLink V1.0 V1.2.0 V1.2.1</strong>的硬件缺陷。</p><p>对于<strong>HSLink V1.2.0 V1.2.1</strong>，可以尝试刮线飞电阻来解决，使用镊子刮开此线上的阻焊，注意不要刮开旁边一根，使用0402或者0603的100k电阻连接。</p><p>请注意，由于此线电压约为5V，请确保<strong>对端IO口耐压5V</strong>!</p><p><img src="'+o+'" alt="hslink_uart_fly_pullup_v1.2.0_1"></p><p><img src="'+c+'" alt="hslink_uart_fly_pullup_v1.2.0_2"></p><h3 id="我的hslink似乎变砖了" tabindex="-1"><a class="header-anchor" href="#我的hslink似乎变砖了"><span>我的HSLink似乎变砖了？</span></a></h3><p>一般情况下正常升级不会出现问题，但是如果出现了问题，可以尝试以下救砖方式：</p><ul><li>对于开机闪烁2次蓝灯的版本，在闪烁期间按下按钮，即可保持Bootloader，出现<code>CHERRYUF2</code>移动存储设备。</li><li>对于出售的v1.2及之后的版本，Bootloader中已添加看门狗，在多次启动失败后保持在Bootloader的升级状态，即出现<code>CHERRYUF2</code>移动存储设备。对于这个版本，尝试连接usb等待30s。</li><li>如果你有条件使用串口下载，包括但不限于探针、夹子、焊线，推荐使用<a href="https://github.com/hpmicro/hpm_manufacturing_tool/releases/tag/v0.5.0" target="_blank" rel="noopener noreferrer">hpmicro/hpm_manufacturing_tool: HPMicro Manufacturing Tool</a>下载<a href="https://github.com/cherry-embedded/CherryDAP/releases" target="_blank" rel="noopener noreferrer">GitHub releases</a>中的<strong>merge.bin</strong>。按住按键插入usb后即可连接isp工具，默认配置即可下载。</li><li>对于初版也可尝试在插入usb后<strong>立即</strong>按住按钮，出现<code>CHERRYUF2</code>移动存储设备即可。由于窗口时间不长，请多次尝试。</li></ul><h2 id="开源资料" tabindex="-1"><a class="header-anchor" href="#开源资料"><span>开源资料</span></a></h2><p>软件：<a href="https://github.com/cherry-embedded/CherryDAP/tree/master/projects/HSLink-Pro" target="_blank" rel="noopener noreferrer">CherryDAP/projects/HSLink-Pro at master · cherry-embedded/CherryDAP</a></p><p>硬件：<a href="https://github.com/HSLink/HSLink_Hardware" target="_blank" rel="noopener noreferrer">HSLink/HSLink_Hardware: A place to release hslink hardware</a></p><p>上位机：<a href="https://github.com/HSLink/HSLinkUpper" target="_blank" rel="noopener noreferrer">HSLink/HSLinkUpper</a></p><p>需求收集：<a href="https://github.com/cherry-embedded/CherryDAP/issues/34" target="_blank" rel="noopener noreferrer">HSLink需求收集 · Issue #34 · cherry-embedded/CherryDAP</a></p><p>制作指南：<a href="https://github.com/HSLink/HSLink_Hardware/blob/main/HSLinkCompact_v1.3.1/ProductionGuide.md" target="_blank" rel="noopener noreferrer">v1.3.1制作指南</a></p>',49)]))}const b=t(n,[["render",h],["__file","HSLink Pro.html.vue"]]),u=JSON.parse('{"path":"/projects/HSLink%20Pro.html","title":"HSLink Pro","lang":"zh-CN","frontmatter":{"title":"HSLink Pro","description":"HSLink Pro 是一款使用 HPM5301 芯片的一个 CherryDAP 实现。其中主要代码参考了 hpm5301evklite 工程。 支持特性 目前 HSLink Pro 支持的特性有： 提供最高80MHz的 SWD 和 JTAG 速率 电平转换功能，适配任意电平的目标板 同时支持 SWD 和 JTAG 协议 支持为目标板提供最高 1A 负...","head":[["meta",{"property":"og:url","content":"https://github.com/cherry-embedded/CherryDAP/projects/HSLink%20Pro.html"}],["meta",{"property":"og:site_name","content":"CherryDAP"}],["meta",{"property":"og:title","content":"HSLink Pro"}],["meta",{"property":"og:description","content":"HSLink Pro 是一款使用 HPM5301 芯片的一个 CherryDAP 实现。其中主要代码参考了 hpm5301evklite 工程。 支持特性 目前 HSLink Pro 支持的特性有： 提供最高80MHz的 SWD 和 JTAG 速率 电平转换功能，适配任意电平的目标板 同时支持 SWD 和 JTAG 协议 支持为目标板提供最高 1A 负..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-07-23T14:23:11.000Z"}],["meta",{"property":"article:modified_time","content":"2025-07-23T14:23:11.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"HSLink Pro\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-07-23T14:23:11.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"cherry-embedded\\",\\"url\\":\\"https://github.com/cherry-embedded\\"}]}"]]},"git":{"createdTime":1727104502000,"updatedTime":1753280591000,"contributors":[{"name":"HalfSweet","username":"HalfSweet","email":"60973476+HalfSweet@users.noreply.github.com","commits":2,"url":"https://github.com/HalfSweet"},{"name":"HalfSweet","username":"HalfSweet","email":"HalfSweet@HalfSweet.cn","commits":2,"url":"https://github.com/HalfSweet"},{"name":"Kai","username":"Kai","email":"60053077+kaidegit@users.noreply.github.com","commits":6,"url":"https://github.com/Kai"}]},"readingTime":{"minutes":7.09,"words":2127},"filePathRelative":"projects/HSLink Pro.md","localizedDate":"2024年9月23日","autoDesc":true}');export{b as comp,u as data};
